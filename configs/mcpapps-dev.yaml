# MCP Apps Development Configuration
#
# Use with docker-compose.dev.yml for local development.
#
# Usage:
#   1. Start Trino:   docker compose -f docker-compose.dev.yml up -d
#   2. Run server:    go run ./cmd/mcp-data-platform --config configs/mcpapps-dev.yaml
#   3. Test:          npx @anthropics/mcp-inspector http://localhost:3001
#
# Edit apps in ./apps/ directory - changes are served immediately (no restart needed).

apiVersion: v1

server:
  name: mcp-data-platform-dev
  transport: sse
  address: ":3001"

# Allow anonymous access for local development
auth:
  allow_anonymous: true

# Single admin persona with full access
personas:
  admin:
    display_name: "Developer"
    roles: ["admin"]
    tools:
      allow: ["*"]
      deny: []
  default_persona: admin

# Trino connection (matches docker-compose.dev.yml)
toolkits:
  trino:
    enabled: true
    instances:
      default:
        host: localhost
        port: 8090
        ssl: false
        user: dev
        catalog: memory
        schema: default
        default_limit: 100
        max_limit: 1000

# MCP Apps Configuration
#
# assets_path must be an absolute path to the directory containing app files.
# For local development, use the full path to your apps/ directory.
#
# The path is resolved at startup - edit HTML/JS/CSS and refresh to see changes.
mcpapps:
  enabled: true
  apps:
    query_results:
      enabled: true
      # IMPORTANT: Replace with your actual absolute path
      # Example paths:
      #   macOS:   /Users/yourname/workspace/mcp-data-platform/apps/query-results
      #   Linux:   /home/yourname/workspace/mcp-data-platform/apps/query-results
      #   Windows: C:/Users/yourname/workspace/mcp-data-platform/apps/query-results
      assets_path: "${MCP_APPS_PATH}/query-results"
      entry_point: "index.html"
      tools:
        - trino_query
        - trino_execute
      csp:
        resource_domains:
          - "https://cdn.jsdelivr.net"
      config:
        chartCDN: "https://cdn.jsdelivr.net/npm/chart.js"
        defaultChartType: "bar"
        maxTableRows: 1000
